# node에서 테스트 하는 법
- node에서는 jest를 사용해서 테스트함

[단위테스트] => **service, controller**
# test 하는 법(분기가 나뉘어지는 부분을 기준으로 짠다(try/catch, if 등))
- test : 테스트 하는 함수
- describe(): 그룹화 함수
- describe('isLoggedIn', () => {
    test('1 + 1은 2입니다.', () => {
        // expect(코드) : 이 코드가
        // .toEqual(결과) : 이 결과와 같다
        // .toBeCalled() : expect 속 코드가 호출되었는지?
        // .toBeCalledTimes(n) : expect 속 코드가 n번 호출되었는지? 
        // .toBeCalledWith(매개변수|값) : 매개변수|값도 불렸는지 확인할 수 있음
        expect(1+1).toEqual(2);
    });
  })

# 테스트 커버리지
- 내 코드에서 얼만큼 테스트가 되고 되지 않았는지 보여주는 부분
- 내가 테스트한 코드, 파일내에서의 테스트 퍼센트를 보여주는 것, 프로젝트 전체에 대한 퍼센트를 보여주는 건 아니라는 것
- 명령어: npm run coverage(coverage: "jest --coverage")

[통합테스트] => **routes** [ex:auth.test.js]
- 여러가지 함수들이 들어있음 -> 실행하게 되면 전부 다 잘 작동하는지 볼 수 있음
# node 통합테스트를 위한 준비
- 1. npm i -D supertest
- 2. 통합테스트 때 서버를 실행시키지 않기 때문에 app.js의 app.listen 부분 다른 파일로 분리
     (supertest가 app만 필요하고 app.listen을 필요로하지 않음)
- 3. package.json main 경로와 start 명령어의 경로 수정해줌(실행하기 위해서는 서버가 실행되어야 함)
- 4. config.json의 test부분 비번, database 수정
- 5. test용 DB 생성 => npx sequelize db:create --env test

# supertest 사용법
- const request = require('supertest');
- supertest(app).요청메서드('경로').send({req.body객체요소});